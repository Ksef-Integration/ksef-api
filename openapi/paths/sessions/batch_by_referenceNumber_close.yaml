post:
  tags:
  - BatchInvoice
  summary: Zamknięcie sesji wsadowej
  description: 'Zamyka sesję wsadową, rozpoczyna procesowanie paczki faktur i generowanie
    UPO dla prawidłowych faktur oraz zbiorczego UPO dla sesji.


    Wymagane uprawnienia: `InvoiceWrite`.'
  parameters:
  - name: referenceNumber
    in: path
    description: Numer referencyjny sesji
    required: true
    schema:
      type: string
  responses:
    '204':
      description: No Content
    '400':
      description: "| ExceptionCode       | ExceptionDescription                 \
        \               | Details                                                \
        \                   | \n|---------------------|-----------------------------------------------------|---------------------------------------------------------------------------|\n\
        | 21157               | Nieprawidłowy rozmiar części pakietu.            \
        \   | Zadeklarowany rozmiar części '{ordinalNumber}' nie zgadza się z rzeczywistym.\
        \  | \n| 21173               | Brak sesji o wskazanym numerze referencyjnym.\
        \       | Sesja o numerze referencyjnym {referenceNumber} nie została znaleziona.\
        \   |\n| 21180               | Status sesji nie pozwala na wykonanie operacji.\
        \     | Status sesji {code} uniemożliwia jej zamknięcie.                 \
        \         |\n| 21205               | Pakiet nie może być pusty.          \
        \                | Nie przesłano zadeklarowanej '{ordinalNumber}' części pliku.\
        \               |\n| 21405 | Błąd walidacji danych wejściowych. | {treść błędu\
        \ z walidatora} |"
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/exception_response.yaml
      x-summary: Bad Request
    '401':
      description: Unauthorized
    '403':
      description: Forbidden
  security:
  - Bearer: []
  x-required-permissions:
  - InvoiceWrite
